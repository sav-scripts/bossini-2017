!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120==0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(){window.SiteUtils={changeQueryParam:function(a,b,c){var d=new RegExp("([?&])"+b+"=.*?(&|$)","i"),e=-1!==a.indexOf("?")?"&":"?";return a.match(d)?a.replace(d,"$1"+b+"="+c+"$2"):a+e+b+"="+c},removeURLParameter:function(a,b){var c=a.split("?");if(c.length>=2){for(var d=encodeURIComponent(b)+"=",e=c[1].split(/[&;]/g),f=e.length;f-- >0;)-1!==e[f].lastIndexOf(d,0)&&e.splice(f,1);return a=c[0]+(e.length>0?"?"+e.join("&"):"")}return a},getParameterByName:function(a,b){b||(b=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null}}}(),function(){function a(a){if(history&&history.replaceState){var b=SiteUtils.removeURLParameter(location.href,"code");b=SiteUtils.removeURLParameter(b,"state");var c=SceneHandler.getHash();b=b.replace("?#"+c,"").replace("#"+c,""),b+="#"+a,window.history.replaceState({path:b},"",b)}}function b(a){console.log("statusChangeCallback"),console.log(a),"connected"===a.status?console.log("connected"):"not_authorized"===a.status?console.log("not authorized"):console.log("not login")}function c(a){for(var b=atob(a.split(",")[1]),c=new ArrayBuffer(b.length),d=new Uint8Array(c),e=0;e<b.length;e++)d[e]=b.charCodeAt(e);return new Blob([c],{type:"image/png"})}var d=window.FBHelper={_appId:null,_uid:null,_uname:null,settings:{useRedirectLogin:!1,permissions:[]},init:function(a,c,e,f,g){var h={appId:a,cookie:!0,xfbml:!0,version:"v2.8"};$.extend(d.settings,c),d._appId=h.appId,window.fbAsyncInit=function(){FB.init(h),g&&FB.getLoginStatus(function(a){b(a)}),e&&e.apply()},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/zh_TW/sdk.js?v=1",e.parentNode.insertBefore(d,e),d.onerror=f)}(document,"script","facebook-jssdk")},checkAccessToken:function(){if(location.hash.match("access_token")&&location.hash.match("state")){var b=location.hash.replace("#","?");if(b){d._token=SiteUtils.getParameterByName("access_token",b);var c=SiteUtils.getParameterByName("state",b);window.location.hash="#"+c,a(c)}}},loginFB:function(a,b,c){function e(){Loading&&Loading.hide();var c=b?encodeURI(redirectUrl):encodeURI(window.location.href.replace(window.location.search,"").replace(window.location.hash,"").replace("?","")),e="https://www.facebook.com/dialog/oauth?response_type=token&client_id="+Main.settings.fb_appid+"&scope="+d.settings.permissions.join(",")+"&state="+a+"&redirect_uri="+c;window.open(e,"_self")}function f(a,b){a&&(d._token=a.accessToken,d._uid=a.userID),c&&c.call(null,b)}d._uid?f():d.settings.useRedirectLogin?FB.getLoginStatus(function(a){"connected"===a.status?f(a.authResponse):e()}):FB.login(function(a){a.error?f(null,"登入 Facebook 失敗"):a.authResponse?f(a.authResponse):f(null,"unauthorized")},{scope:Main.settings.fbPermissions,return_scopes:!0,auth_type:"rerequest"})},getPublicProfile:function(a){FB.api("/me",function(b){d._uname=b.name,a.apply(null,[b])})},checkLoginStatus:function(a,b){function c(c){for(var d={},e=a.length,f=0,g=0;g<a.length;g++)d[a[g]]=!1;FB.api("/me/permissions",function(a){if(a&&a.data&&a.data.length){var g,h;for(g=0;g<a.data.length;g++)h=a.data[g],void 0!==d[h.permission]&&(d[h.permission]=!0,f++);f<e?b.call(null,{message:"lack permission",permissionDic:d},null):b.call(null,null,c)}else b.call(null,{message:"check permission fail"},null)})}FB.getLoginStatus(function(d){"connected"===d.status?a?c(d.authResponse):b.call(null,null,d.authResponse):b.call(null,{message:"no connect"},null)})},postCanvasToFacebook:function(a,b,d){var e,f=a.toDataURL("image/png");try{e=c(f)}catch(a){console.log(a)}var g=new FormData;g.append("access_token",b),g.append("source",e);try{$.ajax({url:"https://graph.facebook.com/me/photos?access_token="+b,type:"POST",data:g,processData:!1,contentType:!1,cache:!1,success:function(a){d.call(null,null,a)},error:function(a,b,c){d.call(null,"error "+c+" Status "+a.status)},complete:function(){}})}catch(a){d.call(null,a)}}}}(),function(){function a(a,b,c){this.api=a,this.apiParams=b,this.after=null,this.dataList=[],this.thereIsMore=!0,this.cbFetchComplete=c,this.lastFetchIndex=0}window.FBData=a,a.prototype.fetch=function(){var a=this;return a.thereIsMore||(console.log("warning: trying to fetch data where there is no more."),a.cbFetchComplete.call(a,a.dataList)),a.lastFetchIndex=a.dataList.length,FB.api(a.api,"GET",a.apiParams,function(b){b.error?console.error(b.error):(a.dataList=a.dataList.concat(b.data),a.apiParams.after=Boolean(b.paging&&b.paging.next)?b.paging.cursors.after:null,a.apiParams.after?a.thereIsMore=!0:(delete a.apiParams.after,a.thereIsMore=!1),a.cbFetchComplete.call(a,a.dataList))}),this}}(),function(){"use strict";function a(b,c,d,e,f,g,h,i,j,k,l){function m(){var a,f=$(b).val(),g=$(c).val(),i=""!=f&&f==v;i&&g>w&&$(c).prop("selectedIndex",0);var j=i?w:12;for(a=1;a<=12;a++)$($(c).find("option")[a]).css("display",a<=j?"block":"none");if($(d).find("option").remove(),$(d).append('<option value="" selected>'+h+"</option>\n"),""!=f&&""!=g){var l=new Date(f,g,-1),m=l.getDate()+1;for(i&&g==w&&(m=x),a=1;a<=m;a++)$(d).append('<option value="'+a+'">'+a+k+"</option>\n");$(d).prop("selectedIndex",0),e&&e.apply(null,[newDayIndex])}}function n(a,e,f){$(b).prop("selectedIndex",parseInt(a)-1900+1),$(c).prop("selectedIndex",parseInt(e)),m(),$(d).prop("selectedIndex",parseInt(f))}function o(){n(1899,0,0)}function p(){$(b).attr("disabled","disabled"),$(c).attr("disabled","disabled"),$(d).attr("disabled","disabled")}function q(){$(b).removeAttr("disabled"),$(c).removeAttr("disabled"),$(d).removeAttr("disabled")}function r(){return{year:$(b).val(),month:$(c).val(),day:$(d).val()}}function s(a){null==a&&(a="/");var e=r(b,c,d);return""==e.year||""==e.month||""==e.day?null:e.year+a+e.month+a+e.day}var t=a.prototype=this;t.update=m,t.getDateValue=r,t.getDateString=s,t.to=n,t.lock=p,t.unlock=q,t.reset=o,$(b).find("option").remove(),$(c).find("option").remove(),$(d).find("option").remove(),null==f&&(f="年"),null==g&&(g="月"),null==h&&(h="日"),i=null==i?"":" "+i,j=null==j?"":" "+j,k=null==k?"":" "+k,$(b).append('<option value="" selected>'+f+"</option>\n"),$(c).append('<option value="" selected>'+g+"</option>\n");var u;l||(l=new Date);var v=l.getFullYear(),w=l.getMonth()+1,x=l.getDate();for(u=1900;u<=l.getFullYear();u++)$(b).append('<option value="'+u+'">'+u+i+"</option>\n");for(u=1;u<=12;u++)$(c).append('<option value="'+u+'">'+u+j+"</option>\n");$(b).change(m),$(c).change(m),$(b).prop("selectedIndex",0),$(c).prop("selectedIndex",0),$(d).prop("selectedIndex",0),m()}window.FormHelper={};var b,c,d;b=["台北市","基隆市","新北市","宜蘭縣","新竹市","新竹縣","桃園縣","苗栗縣","台中市","彰化縣","南投縣","嘉義市","嘉義縣","雲林縣","台南市","高雄市","澎湖縣","屏東縣","台東縣","花蓮縣","金門縣","連江縣","南海諸島"],c=new Array(23),d=new Array(23),c[0]=["中正區","大同區","中山區","松山區","大安區","萬華區","信義區","士林區","北投區","內湖區","南港區","文山區"],c[1]=["仁愛區","信義區","中正區","中山區","安樂區","暖暖區","七堵區"],c[2]=["萬里區","金山區","板橋區","汐止區","深坑區","石碇區","瑞芳區","平溪區","雙溪區","貢寮區","新店區","坪林區","烏來區","永和區","中和區","土城區","三峽區","樹林區","鶯歌區","三重區","新莊區","泰山區","林口區","蘆洲區","五股區","八里區","淡水區","三芝區","石門區"],c[3]=["宜蘭市","頭城鎮","礁溪鄉","壯圍鄉","員山鄉","羅東鎮","三星鄉","大同鄉","五結鄉","冬山鄉","蘇澳鎮","南澳鄉"],c[4]=new Array("新竹市"),c[5]=["竹北市","湖口鄉","新豐鄉","新埔鄉","關西鎮","芎林鄉","寶山鄉","竹東鎮","五峰鄉","橫山鄉","尖石鄉","北埔鄉","峨嵋鄉"],c[6]=["中壢市","平鎮市","龍潭鄉","楊梅鎮","新屋鄉","觀音鄉","桃園市","龜山鄉","八德市","大溪鎮","復興鄉","大園鄉","蘆竹鄉"],c[7]=["竹南鎮","頭份鎮","三灣鄉","南庄鄉","獅潭鄉","後龍鎮","通霄鎮","苑裡鎮","苗栗市","造橋鄉","頭屋鄉","公館鄉","大湖鄉","泰安鄉","銅鑼鄉","三義鄉","西湖鄉","卓蘭鄉"],c[8]=["中區","東區","南區","西區","北區","北屯區","西屯區","南屯區","太平區","大里區","霧峰區","烏日區","豐原區","后里區","石岡區","東勢區","和平區","新社區","潭子區","大雅區","神岡區","大肚區","沙鹿區","龍井區","梧棲區","清水區","大甲區","外埔區","大安區"],c[9]=["彰化市","芬園鄉","花壇鄉","秀水鄉","鹿港鎮","福興鄉","線西鄉","和美鎮","伸港鄉","員林鎮","社頭鄉","永靖鄉","埔心鄉","溪湖鎮","大村鄉","埔鹽鄉","田中鎮","北斗鎮","田尾鄉","埤頭鄉","溪州鄉","竹塘鄉","二林鎮","大城鄉","芳苑鄉","二水鄉"],c[10]=["南投市","中寮鄉","草屯鎮","國姓鄉","埔里鎮","仁愛鄉","名間鄉","集集鄉","水里鄉","魚池鄉","信義鄉","竹山鎮","鹿谷鄉"],c[11]=new Array("嘉義市"),c[12]=["番路鄉","梅山鄉","竹崎鄉","阿里山鄉","中埔鄉","大埔鄉","水上鄉","鹿草鄉","太保市","朴子市","東石鄉","六腳鄉","新港鄉","民雄鄉","大林鎮","溪口鄉","義竹鄉","布袋鎮"],c[13]=["斗南市","大埤鄉","虎尾鎮","土庫鎮","褒忠鄉","東勢鄉","台西鄉","崙背鄉","麥寮鄉","斗六市","林內鄉","古坑鄉","莿桐鄉","西螺鎮","二崙鄉","北港鎮","水林鄉","口湖鄉","四湖鄉","元長鄉"],c[14]=["中區","東區","南區","西區","北區","安平區","安南區","永康區","歸仁區","新化區","左鎮區","玉井區","楠西區","南化區","仁德區","關廟區","龍崎區","官田區","麻豆區","佳里區","西港區","七股區","將軍區","學甲區","北門區","新營區","後壁區","白河區","東山區","六甲區","下營區","柳營區","鹽水區","善化區","大內區","山上區","新市區","安定區"],c[15]=["新興區","前金區","苓雅區","鹽埕區","鼓山區","旗津區","前鎮區","三民區","楠梓區","小港區","左營區","仁武區","大社區","岡山區","路竹區","阿蓮區","田寮區","燕巢區","橋頭區","梓官區","彌陀區","永安區","湖內區","鳳山區","大寮區","林園區","鳥松區","大樹區","旗山區","美濃區","六龜區","內門區","杉林區","甲仙區","桃源區","那瑪夏區","茂林區","茄萣區"],c[16]=["馬公市","西嶼鄉","望安鄉","七美鄉","白沙鄉","湖西鄉"],c[17]=["屏東市","三地門鄉","霧台鄉","瑪家鄉","九如鄉","里港鄉","高樹鄉","鹽埔鄉","長治鄉","麟洛鄉","竹田鄉","內埔鄉","萬丹鄉","潮州鎮","泰武鄉","來義鄉","萬巒鄉","嵌頂鄉","新埤鄉","南州鄉","林邊鄉","東港鎮","琉球鄉","佳冬鄉","新園鄉","枋寮鄉","枋山鄉","春日鄉","獅子鄉","車城鄉","牡丹鄉","恆春鎮","滿州鄉"],c[18]=["台東市","綠島鄉","蘭嶼鄉","延平鄉","卑南鄉","鹿野鄉","關山鎮","海端鄉","池上鄉","東河鄉","成功鎮","長濱鄉","太麻里鄉","金峰鄉","大武鄉","達仁鄉"],c[19]=["花蓮市","新城鄉","秀林鄉","吉安鄉","壽豐鄉","鳳林鎮","光復鄉","豐濱鄉","瑞穗鄉","萬榮鄉","玉里鎮","卓溪鄉","富里鄉"],c[20]=["金沙鎮","金湖鎮","金寧鄉","金城鎮","烈嶼鄉","烏坵鄉"],c[21]=["南竿鄉","北竿鄉","莒光鄉","東引"],c[22]=["東沙","西沙"],d=new Array(24),d[0]=["100","103","104","105","106","108","110","111","112","114","115","116"],d[1]=["200","201","202","203","204","205","206"],d[2]=["207","208","220","221","222","223","224","226","227","228","231","232","233","234","235","236","237","238","239","241","242","243","244","247","248","249","251","252","253"],d[3]=["260","261","262","263","264","265","266","267","268","269","270","272"],d[4]=new Array("300"),d[5]=["302","303","304","305","306","307","308","310","311","312","313","314","315"],d[6]=["320","324","325","326","327","328","330","333","334","335","336","337","338"],d[7]=["350","351","352","353","354","356","357","358","360","361","362","363","364","365","366","367","368","369"],d[8]=["400","401","402","403","404","406","407","408","411","412","413","414","420","421","422","423","424","426","427","428","429","432","433","434","435","436","437","438","439"],d[9]=["500","502","503","504","505","506","507","508","509","510","511","5112","513","514","515","516","520","521","522","523","524","525","526","527","528","530"],d[10]=["540","541","542","544","545","546","551","552","553","555","556","557","558"],d[11]=new Array("600"),d[12]=["602","603","604","605","606","607","608","611","612","613","614","615","616","621","622","623","624","625"],d[13]=["630","631","632","633","634","635","636","637","638","640","643","646","647","648","649","651","652","653","654","655"],d[14]=["700","701","702","703","704","708","709","710","711","712","713","714","715","716","717","718","719","720","721","722","723","724","725","726","727","730","731","732","733","734","735","736","737","741","742","743","744","745"],d[15]=["800","801","802","803","804","805","806","807","811","812","813","814","815","820","821","822","823","824","825","826","827","828","829","830","831","832","833","840","842","843","844","845","846","847","848","849","851","852"],d[16]=["880","881","882","883","884","885"],d[17]=["900","901","902","903","904","905","906","907","908","909","911","912","913","920","921","922","923","924","925","926","927","928","929","931","932","940","941","942","943","944","945","946","947"],d[18]=["950","951","952","953","954","955","956","957","958","959","961","962","963","964","965","966"],d[19]=["970","971","972","973","974","975","976","977","978","979","981","982","983"],d[20]=["890","891","892","893","894","896"],d[21]=["209","210","211","212"],d[22]=["817","819","290"],FormHelper.completeCounty=function(a,c,d,e,f){a.find("option").remove(),a.append('<option value="" selected>縣市</option>\n');for(var g=0;g<b.length;g++)d==b[g]?a.append('<option value="'+b[g]+'" selected>'+b[g]+"</option>\n"):a.append('<option value="'+b[g]+'">'+b[g]+"</option>\n");FormHelper.completeZone(a,c,e,f),a.on("change",function(){FormHelper.completeZone(a,c,e,f)})},FormHelper.completeZone=function(a,b,e,f){if(b.find("option").remove(),b.append('<option value="" selected>區域</option>\n'),""!=a.val())for(var g=a.get(0).selectedIndex-1,h=c[g],i=d[g],j=0;j<h.length;j++){var k=1==f?" "+i[j]:"",l=h[j]+k;e==h[j]?b.append('<option value="'+l+'" selected>'+l+"</option>\n"):b.append('<option value="'+l+'">'+l+"</option>\n")}},FormHelper.getAddressValue=function(a,e){var f=a.get(0).selectedIndex-1,g=e.get(0).selectedIndex-1,h=c[f],i=d[f];return{county:void 0==b[f]?null:b[f],zone:void 0==h?null:h[g],zipCode:void 0==i?null:i[g]}},window.DateCombo=a}(),function(){window.GeomUtils={getSize_cover:function(a,b,c,d){var e,f,g=a/b,h=c/d;h>g?(f=b,e=f*h):(e=a,f=e/h);var i=e/c,j=a/i,k=b/i;return{width:e,height:f,ratio:i,contentCenterBound:{x:.5*(c-j),y:.5*(d-k),width:j,height:k}}},getSize_contain:function(a,b,c,d){var e,f,g=a/b,h=c/d;return h>g?(e=a,f=e/h):(f=b,e=f*h),{width:e,height:f,ratio:e/c}}}}(),function(){window.CanvasUtils={getColorAt:function(a,b,c){var d=a.getImageData(b,c,1,1).data;return Color.makeRGB(d[0],d[1],d[2],d[3]/255)},drawLine:function(a,b,c,d,e){a.beginPath(),a.moveTo(b,c),a.lineTo(d,e),a.stroke()},downScaleImage:function(a,b,c,d,e,f){var g=document.createElement("canvas");return g.width=a.width,g.height=a.height,g.getContext("2d").drawImage(a,0,0),a.width!==e||a.height!==f?CanvasUtils.downScaleCanvas(g,b,c,d,e,f):g},downScaleCanvas:function(a,b,c,d,e,f){if(c||(c=0),d||(d=0),!(b<1&&b>0))throw"scale must be a positive number <1 ";var g=b*b,h=a.width,i=a.height,j=Math.floor(h*b),k=Math.floor(i*b),l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=!1,B=!1,C=a.getContext("2d").getImageData(0,0,h,i).data,D=new Float32Array(3*j*k),E=0,F=0,G=0;for(m=0;m<i;m++)for(p=m*b,t=0|p,q=3*t*j,B=t!=(0|p+b),B&&(y=t+1-p,z=p+b-t-1),l=0;l<h;l++,n+=4)o=l*b,s=0|o,r=q+3*s,A=s!=(0|o+b),A&&(w=s+1-o,x=o+b-s-1),E=C[n],F=C[n+1],G=C[n+2],A||B?A&&!B?(u=w*b,D[r]+=E*u,D[r+1]+=F*u,D[r+2]+=G*u,v=x*b,D[r+3]+=E*v,D[r+4]+=F*v,D[r+5]+=G*v):B&&!A?(u=y*b,D[r]+=E*u,D[r+1]+=F*u,D[r+2]+=G*u,v=z*b,D[r+3*j]+=E*v,D[r+3*j+1]+=F*v,D[r+3*j+2]+=G*v):(u=w*y,D[r]+=E*u,D[r+1]+=F*u,D[r+2]+=G*u,v=x*y,D[r+3]+=E*v,D[r+4]+=F*v,D[r+5]+=G*v,v=w*z,D[r+3*j]+=E*v,D[r+3*j+1]+=F*v,D[r+3*j+2]+=G*v,v=x*z,D[r+3*j+3]+=E*v,D[r+3*j+4]+=F*v,D[r+3*j+5]+=G*v):(D[r]+=E*g,D[r+1]+=F*g,D[r+2]+=G*g);var H=document.createElement("canvas");H.width=e||j,H.height=f||k;var I=H.getContext("2d"),J=I.getImageData(0,0,j,k),K=J.data,L=0;for(n=0,r=0;L<j*k;n+=3,r+=4,L++)K[r]=Math.ceil(D[n]),K[r+1]=Math.ceil(D[n+1]),K[r+2]=Math.ceil(D[n+2]),K[r+3]=255;return I.putImageData(J,c,d),H},imageToCanvas:function(a,b,c){var d=document.createElement("canvas"),e=1,f=b,g=c;d.width=f,d.height=g;var h=d.getContext("2d"),i=GeomUtils.getSize_cover(f,g,a.width,a.height),j=.5*(f-i.width),k=.5*(g-i.height);return i.ratio<1?($(d).detach(),d=CanvasUtils.downScaleImage(a,i.ratio,j,k,f,g)):h.drawImage(a,0,0,a.width,a.height,j,k,i.width*e,i.height),d},getContextBoundingBox:function(a,b){void 0===b&&(b=15);var c,d,e,f,g,h,i=a.canvas.width,j=a.canvas.height,k=a.getImageData(0,0,i,j).data;a:for(d=j;d--;)for(c=i;c--;)if(k[4*(i*d+c)+3]>b){h=d;break a}if(h){a:for(c=i;c--;)for(d=h+1;d--;)if(k[4*(i*d+c)+3]>b){g=c;break a}a:for(c=0;c<=g;++c)for(d=h+1;d--;)if(k[4*(i*d+c)+3]>b){e=c;break a}a:for(d=0;d<=h;++d)for(c=e;c<=g;++c)if(k[4*(i*d+c)+3]>b){f=d;break a}return{x:e,y:f,maxX:g,maxY:h,w:g-e,h:h-f}}}}}(),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){var b="waitForImages";a.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],hasImageAttributes:["srcset"]},a.expr[":"]["has-src"]=function(b){return a(b).is('img[src][src!=""]')},a.expr[":"].uncached=function(b){return!!a(b).is(":has-src")&&!b.complete},a.fn.waitForImages=function(){var c,d,e,f=0,g=0,h=a.Deferred();if(a.isPlainObject(arguments[0])?(e=arguments[0].waitForAll,d=arguments[0].each,c=arguments[0].finished):1===arguments.length&&"boolean"===a.type(arguments[0])?e=arguments[0]:(c=arguments[0],d=arguments[1],e=arguments[2]),c=c||a.noop,d=d||a.noop,e=!!e,!a.isFunction(c)||!a.isFunction(d))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var i=a(this),j=[],k=a.waitForImages.hasImageProperties||[],l=a.waitForImages.hasImageAttributes||[],m=/url\(\s*(['"]?)(.*?)\1\s*\)/g;e?i.find("*").addBack().each(function(){var b=a(this);b.is("img:has-src")&&j.push({src:b.attr("src"),element:b[0]}),a.each(k,function(a,c){var d,e=b.css(c);if(!e)return!0;for(;d=m.exec(e);)j.push({src:d[2],element:b[0]})}),a.each(l,function(c,d){var e,f=b.attr(d);return!f||(e=f.split(","),void a.each(e,function(c,d){d=a.trim(d).split(" ")[0],j.push({src:d,element:b[0]})}))})}):i.find("img:has-src").each(function(){j.push({src:this.src,element:this})}),f=j.length,g=0,0===f&&(c.call(i[0]),h.resolveWith(i[0])),a.each(j,function(e,j){var k=new Image,l="load."+b+" error."+b;a(k).one(l,function b(e){var k=[g,f,"load"==e.type];return g++,d.apply(j.element,k),h.notifyWith(j.element,k),a(this).off(l,b),g==f?(c.call(i[0]),h.resolveWith(i[0]),!1):void 0}),k.src=j.src})}),h.promise()}}),function(){function a(a){var d=$(a);if(!a._viewports){var e=d.attr("resizable"),f=e.split(";");a._viewports=[];for(var g=0;g<f.length;g++){var h=!1,i=f[g];i.match("c")&&(h=!0,i=i.replace("c",""));var j=i.split("p"),k=j[0]?j[0].split("x"):[0,0],l=j[1]?j[1].split("x"):[0,0],m=!!l;a._viewports.push({w:parseInt(k[0]),h:parseInt(k[1]),paddingW:parseInt(l[0]),paddingH:parseInt(l[1]),hasPadding:m,resizeByParent:h})}}var n=a._viewports[c.modeIndex];if(n){if(ScalableContent.enableDrawBounds&&!a._boundDom&&b(d,n),a._boundDom){$(a._boundDom).css("width",n.w+"%").css("height",n.h+"%").css("left",.5*-n.w+"%").css("top",.5*-n.h+"%");var o=n.w+" x "+n.h;(n.paddingW||n.paddingH)&&(o="size: "+o+"</br>padding: "+n.paddingW+" x "+n.paddingH),a._boundDom.textDom.innerHTML=o}var p=c.width,q=c.height;if(n.resizeByParent){var r=d.parent();p=r.width(),q=r.height()}var s=Helper.getSize_contain(p-2*n.paddingW,q-2*n.paddingH,n.w,n.h).ratio;s>1&&(s=1),d.css("width",100*s).css("height",100*s).css("font-size",100*s+"px")}}function b(a,b){if(ScalableContent.enableDrawBounds){var c=document.createElement("div");c.className="text";var d=document.createElement("div");d.className="bound",$(d).css("width",b.w+"%").css("height",b.h+"%").css("left",.5*-b.w+"%").css("top",.5*-b.h+"%").css("font-size",16),d.appendChild(c),d.textDom=c,a.prepend(d),a[0]._boundDom=d}}var c={width:0,height:0,viewWidthRanges:[640,1280],modeIndex:-1,modeChanged:!1};window.ScalableContent={enableFixFullImage:!0,enableDrawBounds:!0,init:function(a){c.viewWidthRanges=a},updateView:function(a,b){for(var d=c,e=d.modeIndex,f=0;a>d.viewWidthRanges[f]&&f<d.viewWidthRanges.length;)f++;return d.modeIndex=f,d.modeChanged=e!=d.modeIndex,d.width=a,d.height=b,d},updateResizeAble:function(){var b=$(document).find("[resizable]");$.each(b,function(b,c){a(c)})},fixFullImage:function(a){if(ScalableContent.enableFixFullImage){var b=a.find("[full-image='']");$.each(b,function(a,b){var c,d=$(b);if(d.attr("full-image","handled"),c=d.css("background-image")){c=c.slice(5,c.length-2);var e=document.createElement("img");e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("full-size-image-for",b.className),e.src=c,e.className="full-size-image",$(b).prepend(e).css("background-image","none")}}),b=a.find("[full-btn]"),$.each(b,function(a,b){var c=$(b);c.removeAttr("full-btn"),c.toggleClass("full-size-btn",!0),c.find("img").toggleClass("full-size-btn-image",!0)}),b=a.find("[hover-fix]"),$.each(b,function(a,b){var c=$(b);c.removeAttr("hover-fix"),c.on("mouseover",function(){c.toggleClass("hovered",!0)}),c.on("mouseout",function(){c.toggleClass("hovered",!1)})})}}}}(),function(){function a(a){return h&&(a=h.call(null,a)),a}function b(a){a||(a=r),t&&k.getHash()!=a?k.setHash(a):k.toContent(a)}function c(){m=!1,null!=p&&(p.apply(),p=null),f&&f.apply()}var d,e,f,g,h,i,j,k=window.SceneHandler={},l={},m=!1,n=null,o=null,p=null,q=null,r="/Index",s=!1,t=!0,u={},v={},w=null;k.currentScene=null,k.processHashNames=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];_contentClasses.push(window[d]),b.push("/"+d)}return b},k.getLastHash=function(){return o},k.init=function(b,c){c=c||{},d=c.version||"0",e=c.cbBeforeChange,f=c.cbAfterChange,h=c.hashChangeTester,g=c.cbContentChange,q=c.cbContentLoaded,j=c.loadingClass,r=c.defaultHash||"/Index",t=void 0===c.listeningHashChange||c.listeningHashChange;var i,n,o;if(c.blockHashs)for(i=0;i<c.blockHashs.length;i++)v[c.blockHashs[i]]=!0;var s,u,w;for(i=0;i<b.length;i++){if(n=b[i],s=n.split("/"),u=s[1],w=null,2==s.length);else{if(3!=s.length){console.error("illegal hash: "+n);continue}w="/"+s[2]}window[u]?(o={hash:n,index:i,stageClass:window[u],contentHash:w},l[n]=o):console.error("class for: "+u+" is not exist")}t&&k.onHashChange(function(b){""==b&&(b=r),(b=a(b))&&l[b]&&!v[b]&&(m?p=function(){k.toContent(b)}:k.toContent(b))})},k.setLock=function(a){s=a},k.onHashChange=function(a){function b(){s||(i?i=!1:a.apply(null,[k.getHash()]))}if("onhashchange"in window)window.onhashchange=function(){b()};else{var c=window.location.hash;window.setInterval(function(){window.location.hash!=c&&(c=window.location.hash,b())},100)}},k.toLastHash=function(){k.toHash(o)},k.toLastNonPopupHash=function(){k.toHash(w)},k.getHash=function(){return window.location.hash.replace("#","")},k.setHash=function(a,b){b&&(i=!0),window.location.hash="#"+a},k.toFirstHash=function(b){var c=k.getHash();if(t&&l[c]&&!v[c]||(c=r),c=a(c)){if(l[c].stageClass._isPopup){var d=c;p=function(){k.toContent(d)},c=r}return k.toContent(c,b),c}},k.toHash=function(a){v[a]?k.toContent(a):b(a)},k.toContent=function(a,b){if(!m&&(""==a&&(a=r),n!=a)){var d,f;if(b||(b={}),b.firstIn=!1,b.cbContentLoaded=q,m=!0,g&&g.call(null,a),b.lastHash=n,null==n)b.isFirstIn=!0,o=n,n=a,d=l[a],b.contentHash=d.contentHash,k.currentScene=d.stageClass,k.currentScene._isPopup||(w=n),d.stageClass.stageIn(b,c);else if(l[n]&&l[a])if(e&&e.apply(),f=l[n],d=l[a],o=n,n=a,f.stageClass===d.stageClass&&d.contentHash!==f.contentHash)f.stageClass.toContent(d.contentHash,function(){c()});else{k.currentScene=d.stageClass;var h=f.stageClass,i=d.stageClass,j=w;b.contentHash=d.contentHash,k.currentScene._isPopup||(w=n),1!=h._isPopup||i._isPopup?h._isPopup||1!=i._isPopup?1==h._isPopup&&1==i._isPopup?(h.hide(),i.show(c)):f.stageClass.stageOut(b,function(){d.stageClass.stageIn(b,c)}):i.show(c):j&&j!==n?(h.hide(),l[j].stageClass.stageOut(b,function(){d.stageClass.stageIn(b,c)})):h.hide(function(){i.executeAfterPopupClosed&&i.executeAfterPopupClosed.call(),c()})}}},k.loadTemplate=function(a,b,c,e,f){function g(a){function k(){a++,a>=b.length?(!j||f||e||j.hide(),c.apply(null)):g(a)}if(0==b.length)return j&&!f&&j.hide(),void c.apply(null);null==a&&(a=0);var l,m=b[a],n=m.url;m.startWeight&&(h=m.startWeight),m.weight&&(i=m.weight),u[n]?(m.dom=u[n],k()):(j&&!f&&j.progress(.01*h),l=document.createElement("div"),$(l).load(n+"?v="+d,function(){u[n]=l;var a=b.extractClass;a||(a="extract-point");var c=m.dom=$(l).find("."+a)[0];$(c).toggleClass(a,!1),$("#invisible-container").append(c),$(c).waitForImages(function(){if(c.parentNode&&c.parentNode.removeChild(c),j&&!f){var a=(h+i)/100;j.progress(a)}k()},function(a,b){if(j&&!f){var c=(h+a/b*i)/100;j.progress(c)}},!0)}))}j&&!f&&j.show();var h=0,i=100;null!=a?Utility.preloadImages(a.list,g,function(a){j&&!f&&j.progress(a/100)}):g(0)}}(),function(){var a=(window.Utility={},{}),b={};b.log="log",b.warn="warn",b.error="error",b.debug="debug",b.info="info",Utility.setConsoleMethod=function(b,c){console[b]=1==c?a[b]:function(){}},Utility.disableAllConsoleMethods=function(){for(var a in b)this.setConsoleMethod(a,!1)},Utility.enableAllConsoleMethods=function(){for(var a in b)this.setConsoleMethod(a,!0)},function(){if(!window.console){window.console={};for(var c in b)console[b[c]]=function(){}}for(var c in b)a[b[c]]=console[b[c]];window.Array.prototype.indexOf||(window.Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=c<0?Math.ceil(c):Math.floor(c),c<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1})}();var c={};Utility.analyzeURL=function(a){if(!c[a]){var b=/^((http[s]?|ftp):\/)?\/?([^:\/\s]+)((\/\w+)*\/)([\w\-\.]+[^#?\s]+)(.*)?(#[\w\-]+)?$/;c[a]=a.match(b)}return c[a]},Utility.getPathWithFilename=function(){return window.location.href.replace(window.location.search,"").replace(window.location.hash,"").replace("?","")},Utility.getPath=function(a){a||(a=window.location.href);var b=-1==a.indexOf("?")?a:a.substr(0,a.indexOf("?"));-1!==b.indexOf("#")&&(b=b.substr(0,b.indexOf("#")));var c=b.split("/"),d=c[c.length-1];for(-1!==d.indexOf(".")&&c.pop(),b=c.join("/");b.length&&"/"==b.charAt(b.length-1);)b=b.slice(0,b.length-1);return b+="/"},Utility.getProtocol=function(a){return a||(a=window.location.href),Utility.analyzeURL(a)[2]},Utility.urlParams=function(){var a=decodeURIComponent(window.location.href),b=a.split("?")[1];if(!b)return{};b=b.split("#")[0];for(var c={},d=b.split("&"),e=0;e<d.length;e++){var f=d[e].split("=");c[f[0]]=f[1]}return c}(),Utility.isLocalhost=function(){var a=window.location.toString().split("/")[2];return"localhost"==a||"192"==a.split(".")[0]}(),Utility.preloadImages=function(a,b,c,d){function e(){function g(){null!=i&&(i.collector[i.name]=j),j.onerror=null,j.onload=null,e()}if(c&&c.apply(null,[f/a.length*100<<0]),f>=a.length)return void(b&&b.apply());var h=a[f],i=null;"string"!=typeof h&&(i=h,h=i.url),f++;var j=new Image;j.onload=g,d&&(j.onerror=function(){console.error("load image error: ["+h+"]"),g()}),j.src=h}if(null==d&&(d=!0),!a||0==a.length)return void(b&&b.apply());var f=0;e()},Utility.shuffleArray=function(a){for(var b,c,d=a.length;d;b=Math.floor(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a},Utility.isiOS=function(){var a=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(navigator.platform)for(;a.length;)if(navigator.platform===a.pop())return!0;return!1}}(),function(){var a=window.PatternSamples={};a.email=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,a.phone=/^(09)[0-9]{8}$/,a.number=/[0-9]/g,a.nonNumber=/[^0-9]/g,a.onlySpace=/^\s*$/,a.localPhone=/^(0)\d{1,3}(-)\d{5,8}$/,a.personId=/^[A-Z]{1}[1-2]{1}[0-9]{8}$/,a.numberAndLetters=/^[a-zA-Z0-9]*$/}(),function(){function a(a,b,c){var d=this;d._inputDom=a,d._onLoadStart=b,d._onLoadEnd=c,$(a).on("change",function(){d.loadFile()})}window.ImageInput=a,a.prototype={_inputDom:null,_onLoadStart:null,_onLoadEnd:null,_image:null,getLoadedImage:function(){return _image},triggerInput:function(){this._inputDom.value=null,this._inputDom.click()},loadFile:function(){var a=this;if(a._onLoadStart&&a._onLoadStart.call(),a._inputDom.files&&a._inputDom.files[0]){(new FileReader).onload=function(b){a.loadImg(b.target.result,a._onLoadEnd,!0)},a.loadImg(a._inputDom.files[0],a._onLoadEnd)}},loadImg:function(a,b,c){var d=this;d._image&&($(d._image).detach(),d._image=null),loadImage(a,function(a,c){d._image=a,b&&b.call(null,d._image)},{orientation:!0,maxWidth:600,maxHeight:600,cover:!0,crop:!0})},loadImg_old:function(a,b,c){var d=this;d._image&&($(d._image).detach(),d._image=null);var e=document.createElement("img");c||(e.crossOrigin="anonymous"),e.onload=function(){var a=new MegaPixImage(e),c=document.createElement("img");c.onload=function(){d._image=c,b&&b.call(null,d._image)},a.render(c,{width:e.width,height:e.height})},e.onerror=function(a){Loading.progress("image loading error").show()},e.src=a}},a.imageToCanvas=function(a){var b=document.createElement("canvas");return b.width=a.width,b.height=a.height,b.getContext("2d").drawImage(a,0,0),b}}(),function(){"use strict";function a(a,b,c,d,e){function f(b){b&&(m.content.height=$(q.content).height()),$(q.container).css("width","100%").css("height",m.container.height),n.height=m.content.height-m.container.height,n.height<0&&(n.height=0),n.top>n.height&&(n.top=n.height);var c=e?0:30,d=e?0:60;return p.enabled?(m.scrollContainer.x=null==p.x?m.container.width:p.x,m.scrollContainer.y=null==p.y?c:p.y+c,m.scrollContainer.width=null==p.width?l.scrollContainerWidth:p.width,m.scrollContainer.height=null==p.height?m.container.height-d:p.height-d):(m.scrollContainer.x=m.container.width,m.scrollContainer.y=c,m.scrollContainer.width=l.scrollContainerWidth,m.scrollContainer.height=m.container.height-d),q.scrollbar.innerHTML=null!=p.barInnerHtml?p.barInnerHtml:"",q.scrollbase.innerHTML=null!=p.baseInnerHtml?p.baseInnerHtml:"",o.scrollDividContent=m.scrollContainer.height/m.container.height,m.scrollbar.height=k?m.scrollbar.height:m.container.height/m.content.height*m.scrollContainer.height,n.topForScroll=n.top*o.scrollDividContent,n.heightForScroll=m.scrollContainer.height-m.scrollbar.height,n.height<=0?$(q.scrollContainer).css("display","none"):$(q.scrollContainer).css("display","block"),o.mouseWheelInterval=500/n.height*.1,o.buttonProgress=.3*o.mouseWheelInterval,$(q.scrollContainer).css("left",m.scrollContainer.x).css("top",m.scrollContainer.y).css("width",m.scrollContainer.width).css("height",m.scrollContainer.height),$(q.scrollbase).css("height",m.scrollContainer.height),k||$(q.scrollbar).css("height",m.scrollbar.height),$(q.scrollbarContainer).css("height",m.scrollbar.height),$(a).css("overflow","visible"),i(),a}function g(){var b=0;d?(q.container.addEventListener("touchstart",function(a){a.preventDefault(),b=a.touches[0].screenY}),q.container.addEventListener("touchmove",function(a){a.preventDefault();var c=a.touches[0].screenY-b;b=a.touches[0].screenY,h(n.tProgress-c/n.height)}),q.scrollbarContainer.addEventListener("touchstart",function(a){a.preventDefault(),b=a.touches[0].screenY}),q.scrollbarContainer.addEventListener("touchmove",function(a){a.preventDefault();var c=-(a.touches[0].screenY-b);b=a.touches[0].screenY,h(n.tProgress-c/n.heightForScroll)})):(j(q.container,function(a){h(n.tProgress-a/n.height)}),j(q.scrollbarContainer,function(a){h(n.tProgress+a/n.heightForScroll)})),$(document).bind("mousewheel",function(b,c){if($.contains(document,a)){b.stopPropagation();var d=c<0?o.mouseWheelInterval:-o.mouseWheelInterval;h(n.tProgress+d)}})}function h(a){var b=!1;return a<=0&&(a=0,b=!0),a>=1&&(a=1,b=!0),o.smoothMoving?(n.tProgress=a,TweenLite.to(n,.4,{progress:a,onUpdate:i})):(n.tPprogress=n.progress=a,i()),b}function i(){n.top=n.height*n.progress,n.topForScroll=n.heightForScroll*n.tProgress,$(q.scrollbarContainer).css("top",n.topForScroll),$(q.content).css("top",-n.top)}function j(a,b){var c=!1;$(a).on("mousedown",function(a){function d(a){$(document).unbind("mouseup",d),$(document).unbind("mousemove",e)}function e(a){var c=a.clientY-f;f=a.clientY,b.call(null,c)}a.preventDefault(),a.stopPropagation();var f=a.clientY;c=!0,$(document).on("mouseup",d),$(document).on("mousemove",e)})}var k=!1;null==e&&(e=!0);var l={scrollContainerWidth:50},m={content:{x:0,y:0,width:0,height:0},container:{x:0,y:0,width:0,height:0},scrollContainer:{x:0,y:0,width:30,height:0},scrollbase:{x:0,y:0,width:0,height:0},scrollbar:{x:0,y:0,width:0,height:0}};null!=c&&(k=!0,m.scrollbar.height=c);var n={top:0,height:0,topForScroll:0,heightForScroll:0,progress:0,tProgress:0},o={scrollDividContent:1,mouseWheelInterval:.1,smoothMoving:!0,buttonInterval:30,buttonProgress:.02},p={enabled:!1,x:0,y:0,width:0,height:0,barInnerHtml:null,baseInnerHtml:null},q={content:null,container:null,scrollContainer:null,scrollbase:null,scrollbarContainer:null,scrollbar:null,btnUp:null,btnDown:null};return m.container.width=$(a).width(),m.container.height=$(a).height(),q.container=document.createElement("div"),q.container.className="ss_container",q.content=document.createElement("div"),q.content.className="ss_content",q.container.appendChild(q.content),q.content.innerHTML=a.innerHTML,a.innerHTML="",a.appendChild(q.container),null==b&&(b=$(q.content).height()),m.content.height=b,q.scrollContainer=document.createElement("div"),q.scrollContainer.className="ss_scroll_container",a.appendChild(q.scrollContainer),q.scrollbase=document.createElement("div"),q.scrollbase.className="ss_scrollbase",q.scrollContainer.appendChild(q.scrollbase),q.scrollbarContainer=document.createElement("div"),q.scrollbarContainer.className="ss_scrollbar_container",q.scrollContainer.appendChild(q.scrollbarContainer),q.scrollbar=document.createElement("div"),q.scrollbar.className="ss_scrollbar",q.scrollbarContainer.appendChild(q.scrollbar),e||(q.btnUp=document.createElement("div"),q.btnUp.className="ss_button_up",q.scrollContainer.appendChild(q.btnUp),q.btnDown=document.createElement("div"),q.btnDown.className="ss_button_down",q.scrollContainer.appendChild(q.btnDown)),a.containerSize=function(b,c){return null!=b&&(m.container.width=b),null!=c&&(m.container.height=c),a},a.contentHeight=function(b){return m.content.height=b,a},a.scrollbarInnerHtml=function(b){return p.barInnerHtml=b,a},a.scrollbaseInnerHtml=function(b){return p.baseInnerHtml=b,a},a.scrollbarHeight=function(b){return m.scrollbar.height=b,a},a.scrollBound=function(b,c,d,e){return p.enabled=!0,p.x=b,p.y=c,p.width=d,p.height=e,a},a.update=f,a.updateProgress=h,a.doms=q,g(),a}window.SimpleScroller=a}(),function(a){"use strict";function b(a,c,d){var e,f=document.createElement("img");return f.onerror=function(e){return b.onerror(f,e,a,c,d)},f.onload=function(e){return b.onload(f,e,a,c,d)},"string"==typeof a?(b.fetchBlob(a,function(c){c?(a=c,e=b.createObjectURL(a)):(e=a,d&&d.crossOrigin&&(f.crossOrigin=d.crossOrigin)),f.src=e},d),f):b.isInstanceOf("Blob",a)||b.isInstanceOf("File",a)?(e=f._objectURL=b.createObjectURL(a),e?(f.src=e,f):b.readFile(a,function(a){var b=a.target;b&&b.result?f.src=b.result:c&&c(a)})):void 0}function c(a,c){!a._objectURL||c&&c.noRevoke||(b.revokeObjectURL(a._objectURL),delete a._objectURL)}var d=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;b.fetchBlob=function(a,b,c){b()},b.isInstanceOf=function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"},b.transform=function(a,b,c,d,e){c(a,e)},b.onerror=function(a,b,d,e,f){c(a,f),e&&e.call(a,b)},b.onload=function(a,d,e,f,g){c(a,g),f&&b.transform(a,g,f,e,{})},b.createObjectURL=function(a){return!!d&&d.createObjectURL(a)},b.revokeObjectURL=function(a){return!!d&&d.revokeObjectURL(a)},b.readFile=function(a,b,c){if(window.FileReader){var d=new FileReader;if(d.onload=d.onerror=b,c=c||"readAsDataURL",d[c])return d[c](a),d}return!1},"function"==typeof define&&define.amd?define(function(){return b}):"object"==typeof module&&module.exports?module.exports=b:a.loadImage=b}(window),function(a){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],a):a("object"==typeof module&&module.exports?require("./load-image"):window.loadImage)}(function(a){"use strict";var b=a.transform;a.transform=function(c,d,e,f,g){b.call(a,a.scale(c,d,g),d,e,f,g)},a.transformCoordinates=function(){},a.getTransformedOptions=function(a,b){var c,d,e,f,g=b.aspectRatio;if(!g)return b;c={};for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c.crop=!0,e=a.naturalWidth||a.width,f=a.naturalHeight||a.height,e/f>g?(c.maxWidth=f*g,c.maxHeight=f):(c.maxWidth=e,c.maxHeight=e/g),c},a.renderImageToCanvas=function(a,b,c,d,e,f,g,h,i,j){return a.getContext("2d").drawImage(b,c,d,e,f,g,h,i,j),a},a.hasCanvasOption=function(a){return a.canvas||a.crop||!!a.aspectRatio},a.scale=function(b,c,d){function e(){var a=Math.max((i||v)/v,(j||w)/w);a>1&&(v*=a,w*=a)}function f(){var a=Math.min((g||v)/v,(h||w)/w);a<1&&(v*=a,w*=a)}c=c||{};var g,h,i,j,k,l,m,n,o,p,q,r=document.createElement("canvas"),s=b.getContext||a.hasCanvasOption(c)&&r.getContext,t=b.naturalWidth||b.width,u=b.naturalHeight||b.height,v=t,w=u;if(s&&(c=a.getTransformedOptions(b,c,d),m=c.left||0,n=c.top||0,c.sourceWidth?(k=c.sourceWidth,void 0!==c.right&&void 0===c.left&&(m=t-k-c.right)):k=t-m-(c.right||0),c.sourceHeight?(l=c.sourceHeight,void 0!==c.bottom&&void 0===c.top&&(n=u-l-c.bottom)):l=u-n-(c.bottom||0),v=k,w=l),g=c.maxWidth,h=c.maxHeight,i=c.minWidth,j=c.minHeight,s&&g&&h&&c.crop?(v=g,w=h,q=k/l-g/h,q<0?(l=h*k/g,void 0===c.top&&void 0===c.bottom&&(n=(u-l)/2)):q>0&&(k=g*l/h,void 0===c.left&&void 0===c.right&&(m=(t-k)/2))):((c.contain||c.cover)&&(i=g=g||i,j=h=h||j),c.cover?(f(),e()):(e(),f())),s){if(o=c.pixelRatio,o>1&&(r.style.width=v+"px",r.style.height=w+"px",v*=o,w*=o,r.getContext("2d").scale(o,o)),(p=c.downsamplingRatio)>0&&p<1&&v<k&&w<l)for(;k*p>v;)r.width=k*p,r.height=l*p,a.renderImageToCanvas(r,b,m,n,k,l,0,0,r.width,r.height),m=0,n=0,k=r.width,l=r.height,b=document.createElement("canvas"),b.width=k,b.height=l,a.renderImageToCanvas(b,r,0,0,k,l,0,0,k,l);return r.width=v,r.height=w,a.transformCoordinates(r,c),a.renderImageToCanvas(r,b,m,n,k,l,0,0,v,w)}return b.width=v,b.height=w,b}}),function(a){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],a):a("object"==typeof module&&module.exports?require("./load-image"):window.loadImage)}(function(a){"use strict";var b=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);a.blobSlice=b&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},a.metaDataParsers={jpeg:{65505:[]}},a.parseMetaData=function(b,c,d,e){d=d||{},e=e||{};var f=this,g=d.maxMetaDataSize||262144;!!(window.DataView&&b&&b.size>=12&&"image/jpeg"===b.type&&a.blobSlice)&&a.readFile(a.blobSlice.call(b,0,g),function(b){if(b.target.error)return console.log(b.target.error),void c(e);var g,h,i,j,k=b.target.result,l=new DataView(k),m=2,n=l.byteLength-4,o=m;if(65496===l.getUint16(0)){for(;m<n&&((g=l.getUint16(m))>=65504&&g<=65519||65534===g);){if(h=l.getUint16(m+2)+2,m+h>l.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(i=a.metaDataParsers.jpeg[g])for(j=0;j<i.length;j+=1)i[j].call(f,l,m,h,e,d);m+=h,o=m}!d.disableImageHead&&o>6&&(k.slice?e.imageHead=k.slice(0,o):e.imageHead=new Uint8Array(k).subarray(0,o))}else console.log("Invalid JPEG file: Missing JPEG marker.");c(e)},"readAsArrayBuffer")||c(e)},a.hasMetaOption=function(a){return a&&a.meta};var c=a.transform;a.transform=function(b,d,e,f,g){a.hasMetaOption(d)?a.parseMetaData(f,function(g){c.call(a,b,d,e,f,g)},d,g):c.apply(a,arguments)}}),function(a){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-meta"],a):"object"==typeof module&&module.exports?a(require("./load-image"),require("./load-image-meta")):a(window.loadImage)}(function(a){"use strict";"fetch"in window&&"Request"in window&&(a.fetchBlob=function(b,c,d){return a.hasMetaOption(d)?fetch(new Request(b,d)).then(function(a){return a.blob()}).then(c).catch(function(a){console.log(a),c()}):void c()})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-meta"],a):"object"==typeof module&&module.exports?a(require("./load-image"),require("./load-image-meta")):a(window.loadImage)}(function(a){"use strict";a.ExifMap=function(){return this},a.ExifMap.prototype.map={Orientation:274},a.ExifMap.prototype.get=function(a){return this[a]||this[this.map[a]]},a.getExifThumbnail=function(a,b,c){var d,e,f;if(!c||b+c>a.byteLength)return void console.log("Invalid Exif data: Invalid thumbnail data.");for(d=[],e=0;e<c;e+=1)f=a.getUint8(b+e),d.push((f<16?"0":"")+f.toString(16));return"data:image/jpeg,%"+d.join("%")},a.exifTagTypes={1:{getValue:function(a,b){return a.getUint8(b)},size:1},2:{getValue:function(a,b){return String.fromCharCode(a.getUint8(b))},size:1,ascii:!0},3:{getValue:function(a,b,c){return a.getUint16(b,c)},size:2},4:{getValue:function(a,b,c){return a.getUint32(b,c)},size:4},5:{getValue:function(a,b,c){return a.getUint32(b,c)/a.getUint32(b+4,c)},size:8},9:{getValue:function(a,b,c){return a.getInt32(b,c)},size:4},10:{getValue:function(a,b,c){return a.getInt32(b,c)/a.getInt32(b+4,c)},size:8}},a.exifTagTypes[7]=a.exifTagTypes[1],a.getExifValue=function(b,c,d,e,f,g){var h,i,j,k,l,m,n=a.exifTagTypes[e];if(!n)return void console.log("Invalid Exif data: Invalid tag type.");if(h=n.size*f,(i=h>4?c+b.getUint32(d+8,g):d+8)+h>b.byteLength)return void console.log("Invalid Exif data: Invalid data offset.");if(1===f)return n.getValue(b,i,g);for(j=[],k=0;k<f;k+=1)j[k]=n.getValue(b,i+k*n.size,g);if(n.ascii){for(l="",k=0;k<j.length&&"\0"!==(m=j[k]);k+=1)l+=m;return l}return j},a.parseExifTag=function(b,c,d,e,f){var g=b.getUint16(d,e);f.exif[g]=a.getExifValue(b,c,d,b.getUint16(d+2,e),b.getUint32(d+4,e),e)},a.parseExifTags=function(a,b,c,d,e){var f,g,h;if(c+6>a.byteLength)return void console.log("Invalid Exif data: Invalid directory offset.");if(f=a.getUint16(c,d),(g=c+2+12*f)+4>a.byteLength)return void console.log("Invalid Exif data: Invalid directory size.");for(h=0;h<f;h+=1)this.parseExifTag(a,b,c+2+12*h,d,e);return a.getUint32(g,d)},a.parseExifData=function(b,c,d,e,f){if(!f.disableExif){var g,h,i,j=c+10;if(1165519206===b.getUint32(c+4)){if(j+8>b.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==b.getUint16(c+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(b.getUint16(j)){case 18761:g=!0;break;case 19789:g=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==b.getUint16(j+2,g))return void console.log("Invalid Exif data: Missing TIFF marker.");h=b.getUint32(j+4,g),e.exif=new a.ExifMap,h=a.parseExifTags(b,j,j+h,g,e),h&&!f.disableExifThumbnail&&(i={exif:{}},h=a.parseExifTags(b,j,j+h,g,i),i.exif[513]&&(e.exif.Thumbnail=a.getExifThumbnail(b,j+i.exif[513],i.exif[514]))),e.exif[34665]&&!f.disableExifSub&&a.parseExifTags(b,j,j+e.exif[34665],g,e),e.exif[34853]&&!f.disableExifGps&&a.parseExifTags(b,j,j+e.exif[34853],g,e)}}},a.metaDataParsers.jpeg[65505].push(a.parseExifData)}),function(a){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-exif"],a):"object"==typeof module&&module.exports?a(require("./load-image"),require("./load-image-exif")):a(window.loadImage)}(function(a){"use strict";a.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},a.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},a.ExifMap.prototype.getText=function(a){var b=this.get(a);switch(a){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[a][b];case"ExifVersion":case"FlashpixVersion":if(!b)return;return String.fromCharCode(b[0],b[1],b[2],b[3]);case"ComponentsConfiguration":if(!b)return;return this.stringValues[a][b[0]]+this.stringValues[a][b[1]]+this.stringValues[a][b[2]]+this.stringValues[a][b[3]];case"GPSVersionID":if(!b)return;return b[0]+"."+b[1]+"."+b[2]+"."+b[3]}return String(b)},function(a){var b,c=a.tags,d=a.map;for(b in c)c.hasOwnProperty(b)&&(d[c[b]]=b)}(a.ExifMap.prototype),a.ExifMap.prototype.getAll=function(){var a,b,c={};for(a in this)this.hasOwnProperty(a)&&(b=this.tags[a])&&(c[b]=this.getText(b));return c}}),function(a){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-scale","./load-image-meta"],a):"object"==typeof module&&module.exports?a(require("./load-image"),require("./load-image-scale"),require("./load-image-meta")):a(window.loadImage)}(function(a){"use strict";var b=a.hasCanvasOption,c=a.hasMetaOption,d=a.transformCoordinates,e=a.getTransformedOptions;a.hasCanvasOption=function(c){return!!c.orientation||b.call(a,c)},a.hasMetaOption=function(b){return b&&!0===b.orientation||c.call(a,b)},a.transformCoordinates=function(b,c){d.call(a,b,c);var e=b.getContext("2d"),f=b.width,g=b.height,h=b.style.width,i=b.style.height,j=c.orientation;if(j&&!(j>8))switch(j>4&&(b.width=g,b.height=f,b.style.width=i,b.style.height=h),j){case 2:e.translate(f,0),e.scale(-1,1);break;case 3:e.translate(f,g),e.rotate(Math.PI);break;case 4:e.translate(0,g),e.scale(1,-1);break;case 5:e.rotate(.5*Math.PI),e.scale(1,-1);break;case 6:e.rotate(.5*Math.PI),e.translate(0,-g);break;case 7:e.rotate(.5*Math.PI),e.translate(f,-g),e.scale(-1,1);break;case 8:e.rotate(-.5*Math.PI),e.translate(-f,0)}},a.getTransformedOptions=function(b,c,d){var f,g,h=e.call(a,b,c),i=h.orientation;if(!0===i&&d&&d.exif&&(i=d.exif.get("Orientation")),!i||i>8||1===i)return h;f={};for(g in h)h.hasOwnProperty(g)&&(f[g]=h[g]);switch(f.orientation=i,i){case 2:f.left=h.right,f.right=h.left;break;case 3:f.left=h.right,f.top=h.bottom,f.right=h.left,f.bottom=h.top;break;case 4:f.top=h.bottom,f.bottom=h.top;break;case 5:f.left=h.top,f.top=h.left,f.right=h.bottom,f.bottom=h.right;break;case 6:f.left=h.top,f.top=h.right,f.right=h.bottom,f.bottom=h.left;break;case 7:f.left=h.bottom,f.top=h.right,f.right=h.top,f.bottom=h.left;break;case 8:f.left=h.bottom,f.top=h.left,f.right=h.top,f.bottom=h.right}return f.orientation>4&&(f.maxWidth=h.maxHeight,f.maxHeight=h.maxWidth,f.minWidth=h.minHeight,f.minHeight=h.minWidth,f.sourceWidth=h.sourceHeight,f.sourceHeight=h.sourceWidth),f}}),function(){var a={publish:{error:"",serial:"00001",share_url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/fb-share.jpg",coupon:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/coupon-sample.png"},get_entries:{error:"",data:[{serial:"0088",thumb_url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1-thumb.png",url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1.png"},{serial:"0088",thumb_url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1-thumb.png",url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1.png"},{serial:"0088",thumb_url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1-thumb.png",url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1.png"},{serial:"0088",thumb_url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1-thumb.png",url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1.png"},{serial:"0088",thumb_url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1-thumb.png",url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1.png"},{serial:"0088",thumb_url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1-thumb.png",url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1.png"},{serial:"0088",thumb_url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1-thumb.png",url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1.png"},{serial:"0088",thumb_url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1-thumb.png",url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1.png"},{serial:"0088",thumb_url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1-thumb.png",url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1.png"},{serial:"0088",thumb_url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1-thumb.png",url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1.png"},{serial:"0088",thumb_url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1-thumb.png",url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1.png"},{serial:"0088",thumb_url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1-thumb.png",url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1.png"},{serial:"0088",thumb_url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1-thumb.png",url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1.png"},{serial:"0088",thumb_url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1-thumb.png",url:"http://local.savorks.com/projects/zoo/bossini-2017/app/misc/sample-1.png"}],num_pages:3,page_index:0,page_size:14}};window.ApiProxy={callApi:function(b,c,d,e){function f(a){e&&e.call(null,a)}var g="../process/"+b;Main.useFakeData&&d?(!0===d&&(d=b),f(a[d])):$.ajax({url:g,type:"POST",data:c,dataType:"json"}).done(f).fail(function(){f({error:"無法取得伺服器回應"})})}}}(),function(){"use strict";function a(){var a=$(window).width(),c=$(window).height(),d=ScalableContent.updateView(a,c),e=b.viewport;e.changed=d.modeChanged,e.index=d.modeIndex,e.width=a,e.height=c,SceneHandler.currentScene&&SceneHandler.currentScene.resize&&SceneHandler.currentScene.resize()}var b=window.Main={testmode:!1,useFakeData:!1,version:7,localSettings:{fb_appid:"262099524195911"},settings:{isLocal:!1,isMobile:!1,useFakeData:!1,fb_appid:"261350167604180",fbPermissions:[],fbToken:null,fbUid:null,fbState:null,isiOS:!1,isLineBrowser:!1},viewport:{width:0,height:0,ranges:[640],index:-1,changed:!1},hashArray:["/Index","/Videos","/Publish","/Entries","/Rule","/Vip"],defaultHash:"/Index",init:function(){function c(){SceneHandler.init(b.hashArray,{defaultHash:b.defaultHash,listeningHashChange:!0,loadingClass:Loading,version:"1"==Utility.urlParams.nocache?(new Date).getTime():Main.version,cbBeforeChange:function(){},cbAfterChange:function(){Menu.show()},hashChangeTester:function(a){return"/Publish"!=a||FBHelper._token||Main.testmode?a:(SceneHandler.toHash(b.defaultHash),null)}}),SceneHandler.toFirstHash()}FBHelper.checkAccessToken(),"local.savorks.com"!=window.location.host&&"socket.savorks.com"!=window.location.host||($.extend(b.settings,b.localSettings),Main.settings.isLocal=!0,"1"==Utility.urlParams.fakedata&&(Main.useFakeData=!0),"1"==Utility.urlParams.testmode&&(Main.testmode=!0)),ScalableContent.init(b.viewport.ranges),ScalableContent.enableFixFullImage=!1,ScalableContent.enableDrawBounds=!0,b.settings.isLineBrowser=Boolean(navigator.userAgent.match("Line")),b.settings.isiOS=Utility.isiOS(),window._CLICK_=b.settings.isiOS?"touchend":"click",Menu.init(),BGManager.init(),FBHelper.init(Main.settings.fb_appid,{useRedirectLogin:Main.settings.isiOS||Main.settings.isLineBrowser}),c(),$(window).on("resize",a),a()},loginFB:function(a,b){Loading.progress("登入 facebook 中").show(),FBHelper.loginFB(a,b,function(b){Loading.hide(),b&&"unauthorized"==b?alert("您必須登入 facebook 才能參加活動喔"):b?alert(b):SceneHandler.toHash(a)})}}}(),function(){var a=!0,b=!1,c={},d=window.Menu={init:function(){c.container=$("#menu"),c.statement=$("#statement"),c.buttonContainer=c.container.find(".button-container"),c.openPart=c.container.find(".open-part").on(_CLICK_,function(a){"btn"!==a.target.className&&d.close()}),c.menuIcon=c.container.find(".icon").on(_CLICK_,function(){b?d.close():d.open()}),c.logo=c.container.find(".logo").on(_CLICK_,function(){ga("send","event","選單","按鈕點擊","logo"),SceneHandler.toHash("/Index")}),c.btnIndex=c.buttonContainer.find(".btn:nth-child(1)").on(_CLICK_,function(){d.close(),ga("send","event","選單","按鈕點擊","首頁"),SceneHandler.toHash("/Index")}),c.btnVideo=c.buttonContainer.find(".btn:nth-child(2)").on(_CLICK_,function(){d.close(),ga("send","event","選單","按鈕點擊","影片"),SceneHandler.toHash("/Videos")}),c.btnPublish=c.buttonContainer.find(".btn:nth-child(3)").on(_CLICK_,function(){d.close(),ga("send","event","選單","按鈕點擊","發表宣言"),Main.loginFB("/Publish")}),c.btnHistory=c.buttonContainer.find(".btn:nth-child(4)").on(_CLICK_,function(){d.close(),ga("send","event","選單","按鈕點擊","宣言牆"),SceneHandler.toHash("/Entries")}),c.btnRule=c.buttonContainer.find(".btn:nth-child(5)").on(_CLICK_,function(){d.close(),ga("send","event","選單","按鈕點擊","活動辦法與獎項"),SceneHandler.toHash("/Rule")}),c.btnOfficial=c.buttonContainer.find(".btn:nth-child(6)").on(_CLICK_,function(){d.close(),ga("send","event","選單","按鈕點擊","bossini 官網"),window.open("https://www.bossini.com.tw/","_blank")}),c.btnVip=c.buttonContainer.find(".btn:nth-child(7)").on(_CLICK_,function(){d.close(),ga("send","event","選單","按鈕點擊","VIP 方案"),SceneHandler.toHash("/Vip")})},show:function(){a&&(a=!1,c.container.toggleClass("hide-mode",!1),c.statement.toggleClass("hide-mode",!1))},hide:function(){a||(a=!0,c.container.toggleClass("hide-mode",!0),c.statement.toggleClass("hide-mode",!0))},open:function(){b||(b=!0,c.openPart.toggleClass("open-mode",b))},close:function(){b&&(b=!1,c.openPart.toggleClass("open-mode",b))},resize:function(){}}}(),function(){function a(){function a(){(h.backgrounds.playTL=new TimelineMax({paused:!0,repeat:-1})).add(function(){b()},g)}function b(){var a=d;++d>e&&(d=1);var b=j[a],c=j[d];h.backgrounds.append(c);var f=new TimelineMax;f.set(c,{autoAlpha:0}),f.to(c,i,{autoAlpha:1,ease:Power1.easeIn}),f.add(function(){TweenMax.set(b,{autoAlpha:0})})}function c(){d=1;for(var a=1;a<=e;a++){var b=j[a],c=a==d?1:0;TweenMax.set(b,{autoAlpha:c})}}if(!f){f=!0;var d=1,e=5,g=5,i=1,j={};h.backgrounds=h.container.find(".backgrounds");var k;for(k=1;k<=e;k++)j[k]=h.backgrounds.find(".bg-"+k);a(),h.backgrounds.restart=function(a){c();var b=new TimelineMax;b.set(h.backgrounds,{autoAlpha:0}),b.to(h.backgrounds,i,{autoAlpha:1}),h.backgrounds.playTL.restart(),a&&a.call()},h.backgrounds.stop=function(){h.backgrounds.playTL.pause()}}}function b(){function a(){b.removeEventListener("canplay",a),h.video.toggleClass("playing-mode",!0),b.play(),d=!0,c&&c.call()}if(!e){e=!0,h.video=h.container.find(".fullsize-video");var b=h.video[0],c=null,d=!1;h.video.restart=function(e){d?e&&e.call():(c=e,h.video.toggleClass("playing-mode",!1),b.addEventListener("canplay",a),b.load())},h.video.stop=function(){b.pause(),c=null,d=!1}}}var c,d=!1,e=!1,f=!1,g=!0,h={};window.BGManager={init:function(){d=!0,h.container=$("#background")},play:function(a,b){if(!b){if(g)return;g=!0}0===c?h.backgrounds.restart(a):1===c&&h.video.restart(a)},stop:function(){g&&(g=!1,e&&h.video.stop(),f&&h.backgrounds.stop())},resize:function(i){if(d){var j=c,k=Main.viewport;c=k.index;return!!(j!=c)&&(0==k.index?(a(),g&&h.backgrounds.restart(i),e&&h.video.stop()):(b(),g&&h.video.restart(i),f&&h.backgrounds.stop()),!0)}return!1}}}(),function(){function a(){0===Main.viewport.index?e():d()}function b(a){$("#invisible-container").append(a[0].dom),m.container=$("#index"),m.content=m.container.find(".content"),$.extend(m,{content:m.container.find(".content"),leftText1:m.container.find(".left-text-1"),rightText1:m.container.find(".right-text-1"),rightText2:m.container.find(".right-text-2"),rightText3:m.container.find(".right-text-3"),btnStart:m.container.find(".btn-start"),videoSelect:m.container.find(".video-select")}),m.leftText1.letters=m.leftText1.find("div"),m.rightText1.letters=m.rightText1.find("div"),m.rightText2.letters=m.rightText2.find("div"),m.rightText3.letters=m.rightText3.find("div"),m.btnStart=m.container.find(".btn-start").on(_CLICK_,function(){ga("send","event","首頁","按鈕點擊","留下宣言"),Main.loginFB("/Publish")}),c(),m.container.detach()}function c(){function a(a){if(!(a<1||a>c)){d=a;var f=0==Main.viewport.index?246:136,i=f*-(d-1);e=!0,TweenMax.to(g,.4,{marginLeft:i,onComplete:function(){e=!1}}),b();var j=Videos.getVideoDic();h.text(j[d].title)}}function b(){m.arrowLeft.toggleClass("hiding",1==d),m.arrowRight.toggleClass("hiding",d==c)}var c=6,d=1,e=!1;m.arrowLeft=m.videoSelect.find(".arrow-left").on(_CLICK_,function(){e||a(d-1)}),m.arrowRight=m.videoSelect.find(".arrow-right").on(_CLICK_,function(){e||a(d+1)});var f=m.videoSelect.find(".thumb-container").on(_CLICK_,function(){var a=Videos.getVideoDic(),b=a[d];ga("send","event","首頁","點擊影片縮圖",b.title),b.link?window.open(b.link,"_blank"):b.id?(Videos.setPlayingIndex(d),SceneHandler.toHash("/Videos")):alert("影片尚未開放，敬請期待")}),g=f.find(".wrapper"),h=m.videoSelect.find(".video-desc");m.videoSelect.toIndex=a}function d(){l&&l.kill(),m.videoSelect.toIndex(1);var a=l=new TimelineMax;a.set(m.content,{autoAlpha:0}),a.to(m.content,.5,{autoAlpha:1,ease:Power1.easeIn}),a.set(m.rightText1.letters,{autoAlpha:0,marginLeft:f,marginTop:g,rotationX:h,rotationY:h,scale:i},0),a.staggerTo(m.rightText1.letters,1,{autoAlpha:1,marginLeft:0,marginTop:0,rotationX:0,rotationY:0,scale:1},.1,.5),a.set(m.rightText2.letters,{autoAlpha:0,marginLeft:f,marginTop:g,rotationX:h,rotationY:h,scale:i},0),a.staggerTo(m.rightText2.letters,1,{autoAlpha:1,marginLeft:0,marginTop:0,rotationX:0,rotationY:0,scale:1},.1,.5),a.set(m.rightText3.letters,{autoAlpha:0,marginLeft:f,marginTop:g,rotationX:h,rotationY:h,scale:i},0),a.staggerTo(m.rightText3.letters,1,{autoAlpha:1,marginLeft:0,marginTop:0,rotationX:0,rotationY:0,scale:1},.03,.5),a.set(m.leftText1.letters,{scaleY:0,transformOrigin:"center bottom"},0),a.staggerTo(m.leftText1.letters,.5,{scaleY:1,ease:Back.easeOut.config(4)},.01,"-=.01"),a.set(m.btnStart,{autoAlpha:0},0),a.to(m.btnStart,1,{autoAlpha:1,ease:Power1.easeOut},"-=.5"),a.set(m.videoSelect,{autoAlpha:0},0),a.to(m.videoSelect,1,{autoAlpha:1,ease:Power1.easeOut},"-=.5")}function e(){l&&l.kill(),m.videoSelect.toIndex(1);var a=l=new TimelineMax;a.set(m.content,{autoAlpha:0}),a.to(m.content,1,{autoAlpha:1,ease:Power1.easeIn},0),a.set(m.btnStart,{autoAlpha:1},0),a.set(m.videoSelect,{autoAlpha:1},0)}function f(){return 100+100*Math.random()}function g(){return 100*Math.random()-50}function h(){return 720*Math.random()-360}function i(){return 4*Math.random()-2}function j(a){$("#scene-container").append(m.container),ga("send","pageview","首頁"),o.resize(!0);var b=new TimelineMax;b.set(m.container,{autoAlpha:0}),b.to(m.container,.4,{autoAlpha:1}),b.add(function(){a.apply()})}function k(a){var b=new TimelineMax;b.to(m.container,.4,{autoAlpha:0}),b.add(function(){m.container.detach(),a.apply()})}var l,m={},n=!1,o=window.Index={stageIn:function(a,c){function d(b){b&&a.cbContentLoaded&&a.cbContentLoaded.call(),j(c)}function e(a){var c=[{url:"_index.html",startWeight:0,weight:100,dom:null}];SceneHandler.loadTemplate(null,c,function(){b(c),n=!0,a.apply(null)},0)}n?d():e(d)},stageOut:function(a,b){k(b)},resize:function(b){n&&(BGManager.resize(a)?TweenMax.set(m.content,{autoAlpha:0}):b&&a())}}}(),function(){function a(a){$("#invisible-container").append(a[0].dom),n.container=$("#publish"),x={work:y.WorkPart.init(n.container.find(".work-part"),n.container),form:y.FormPart.init(n.container.find(".form-part"),n.container),success:y.Success.init(n.container.find(".success-dialog"),n.container),coupon:y.Coupon.init(n.container.find(".coupon-dialog"),n.container)},n.workContainer=n.container.find(".work-container").toggleClass("visible-mode",!1),n.imageInput=n.container.find(".image-input"),g(),d(),m=new ImageInput(n.imageInput[0],function(){Loading.progress("載入圖片中").show(),n.workContainer.toggleClass("visible-mode",!1)},i),n.btnUpload=n.container.find(".btn-upload").on(_CLICK_,function(){m.triggerInput()}),n.btnNextStep=n.container.find(".btn-next").on(_CLICK_,function(){var a=y.getInputText();""==a?alert("請先輸入您的不停止宣言"):(ga("send","event","發表宣言 - 上傳與填字","完成送出",a),y.toStep("form"))}),n.textInput=n.container.find(".text-input"),e(n.textInput),FBHelper._uid?(t="http://graph.facebook.com/"+FBHelper._uid+"/picture?width=600&height=600",m.loadImg(t,i)):Main.testmode?m.loadImg(t,i):(alert("need login facebook first"),SceneHandler.toHash("/Index")),h(),n.container.detach()}function b(){n.textInput.val(n.textInput.defaultText),f(n.textInput),h()}function c(){var a=document.createElement("canvas");a.width=s.rawWidth,a.height=s.rawHeight;var b=a.getContext("2d");return b.drawImage(p,0,0,p.width,p.height),b.drawImage(q,s.textOffsetX,s.textOffsetY,q.width,q.height),a}function d(){function a(a){var c=n.container.find(".color-block-"+a);c.on(_CLICK_,function(){r=c.css("background-color"),b.toggleClass("focus-mode",!1),c.toggleClass("focus-mode",!0),h()})}var b=n.container.find(".color-block");a(1),a(2),a(3)}function e(a){a.defaultText=a.val(),a.on("focus",function(){a.val()==a.defaultText&&a.val(""),f(a)}).on("blur",function(){""==a.val()&&a.val(a.defaultText),f(a)}).on("input propertychange",function(){f(a),h()}),a.val(a.defaultText),f(a)}function f(a){a.toggleClass("hint-mode",a.val()==a.defaultText)}function g(){n.textCanvas=n.container.find(".text-canvas"),q=n.textCanvas[0];var a=s.workRatio,b=parseInt(n.textCanvas.css("width")),c=parseInt(n.textCanvas.css("height")),d=parseInt(b/a),e=parseInt(c/a);s.textOffsetX=parseInt(n.textCanvas.css("left"))/a,s.textOffsetY=parseInt(n.textCanvas.css("top"))/a;var f=n.textCanvas[0];f.width=d,f.height=e}function h(){function a(a,b){h.fillText(a,0,b*f)}var b=n.textInput.val(),c=s.workRatio,d=n.textInput.css("font-family"),e=27/c+"px",f=36/c,g=n.textCanvas[0],h=g.getContext("2d");if(h.clearRect(0,0,g.width,g.height),h.fillStyle=r,h.font="bold "+e+" "+d,b===n.textInput.defaultText)return void a(u,4);var i=b.split("\n"),j=i.length;j>3&&(j=3);for(var k=0;k<j;k++)a(i[k],k+1);a(u,4)}function i(a){Loading.hide(),p&&$(p).detach(),p=a,p.className="raw-canvas",n.workContainer.toggleClass("visible-mode",!0),n.workContainer.prepend(p)}function j(a){$("#scene-container").append(n.container),y.resize(!0),n.container.toggleClass("success-mode",!1),n.container.toggleClass("coupon-mode",!1),y.toStep(w),b(),a.apply()}function k(){var a=new TimelineMax;a.set(n.container,{autoAlpha:0}),a.to(n.container,.2,{autoAlpha:1}),a.set(n.container,{transformPerspective:600,marginLeft:0,transformOrigin:"center center",rotationY:-70,scale:.2},0),a.to(n.container,1,{rotationY:0,scale:1,ease:Power1.easeInOut},0),a.add(function(){n.container.css("transform","none")})}function l(a){var b=new TimelineMax;b.set(n.container,{transformPerspective:900,transformOrigin:"center center"}),b.to(n.container,1,{rotationY:90,scale:.2,marginLeft:400,ease:Power1.easeIn}),b.to(n.container,.3,{autoAlpha:0},"-=.3"),b.add(function(){n.container.detach(),a.apply()})}var m,n={},o=!1,p=null,q=null,r="#ffffff",s={rawWidth:600,rawHeight:600,workWidth:350,workHeight:350,workRatio:350/600,textOffsetX:0,textOffsetY:0},t="./misc/sample-1.png",u="#不停止，就是最好的超越。",v="work",w=v,x=null,y=window.Publish={stageIn:function(b,c){function d(a){a&&b.cbContentLoaded&&b.cbContentLoaded.call(),j(c)}function e(b){var c=[{url:"_publish.html",startWeight:0,weight:100,dom:null}];SceneHandler.loadTemplate(null,c,function(){a(c),o=!0,b.apply(null)},0)}o?d():e(d)},stageOut:function(a,b){l(b)},getCombinedCanvas:c,getInputText:function(){var a=n.textInput.val();return a===n.textInput.defaultText&&(a=""),a},toStep:function(a){var b=v;v=a;var c=x[b],d=x[v];c?c.hide(d.show):d.show()},resize:function(a){o&&(BGManager.resize(k)?TweenMax.set(n.container,{autoAlpha:0}):a&&k())}}}(),function(){var a={},b=!1,c=window.Publish.WorkPart={init:function(b,d){return a.container=b,a.parent=d,c},show:function(c){b&&(b=!1,ga("send","pageview","發表宣言 - 上傳與填字"),a.parent.toggleClass("success-mode",!1),a.parent.toggleClass("coupon-mode",!1),$("#scene-container").toggleClass("height-1150",!0),TweenMax.to(a.container,.4,{autoAlpha:1,marginLeft:0,onComplete:c}))},hide:function(c){b||(b=!0,TweenMax.to(a.container,.4,{autoAlpha:0,marginLeft:50,onComplete:function(){$("#scene-container").toggleClass("height-1150",!1),c&&c.call()}}))}}}(),function(){function a(){d.fields.firstName.val(""),d.fields.lastName.val(""),d.fields.email.val(""),d.fields.phone.val(""),d.fields.addressDetail.val(""),d.fields.genderSelect[0].selectedIndex=0,d.fields.addressCounty[0].selectedIndex=0,d.fields.addressZone[0].selectedIndex=0,d.eulaCheckbox[0].checked=!1,d.informCheckbox[0].checked=!1}function b(){Publish.Coupon.setCouponUrl(null);var a=c();if(a){var b=Publish.getCombinedCanvas();b?(a.image_data=b.toDataURL("image/jpeg",.95).replace(/^data:image\/jpeg;base64,/,""),a.description=Publish.getInputText(),a.fb_uid=FBHelper._uid,a.fb_token=FBHelper._token,Loading.progress("資料傳輸中 ... 請稍候").show(),ApiProxy.callApi("publish",a,!0,function(a){a.error?(alert(a.error),ga("send","event","發表宣言 - 表單","資料送交失敗",a.error)):(Publish.Success.setShareImageUrl(a.share_url),Publish.Coupon.setCouponUrl(a.coupon),ga("send","event","發表宣言 - 表單","資料送交成功 - 序號",a.serial),ga("send","event","發表宣言 - 表單","資料送交成功 - 折價券",a.coupon),Publish.toStep("success")),Loading.hide()})):alert("lack image data")}}function c(){var a,b={};if(a=d.fields.lastName[0],PatternSamples.onlySpace.test(a.value))return alert("請輸入您的姓氏"),void a.focus();if(b.last_name=a.value,a=d.fields.firstName[0],PatternSamples.onlySpace.test(a.value))return alert("請輸入您的名字"),void a.focus();if(b.first_name=a.value,b.gender=d.fields.genderSelect.val(),!b.gender)return void alert("請選擇您的性別");if(a=d.fields.email[0],!PatternSamples.email.test(a.value))return alert("請輸入正確的電子郵件信箱"),void a.focus();if(b.email=a.value,a=d.fields.phone[0],!PatternSamples.phone.test(a.value))return alert("請輸入正確的手機號碼"),void a.focus();b.phone=a.value;var c=FormHelper.getAddressValue(d.fields.addressCounty,d.fields.addressZone);return c.county,c.zone,b.address_county=c.county||"",b.address_zone=c.zone||"",a=d.fields.addressDetail[0],PatternSamples.onlySpace.test(a.value),b.address_detail=a.value||"",d.eulaCheckbox[0].checked?(b.inform_allowed=d.informCheckbox[0].checked?"true":"false",b):void alert("您必須同意遵守活動相關規範才能參加活動")}var d={},e=!0,f=window.Publish.FormPart={init:function(a,c){return d.container=a,d.parent=c,TweenMax.set(d.container,{autoAlpha:0,marginLeft:-50}),d.fields={firstName:d.container.find(".field-first-name"),lastName:d.container.find(".field-last-name"),email:d.container.find(".field-email"),phone:d.container.find(".field-phone"),genderSelect:d.container.find(".gender-select"),addressCounty:d.container.find(".address-county"),addressZone:d.container.find(".address-zone"),addressDetail:d.container.find(".field-address-detail")},d.eulaCheckbox=d.container.find(".eula-checkbox input"),d.informCheckbox=d.container.find(".inform-checkbox input"),FormHelper.completeCounty(d.fields.addressCounty,d.fields.addressZone),d.btnSend=d.container.find(".btn-send").on(_CLICK_,function(){ga("send","event","發表宣言 - 表單","按鈕點擊","完成送出"),b()}),f},show:function(b){e&&(e=!1,ga("send","pageview","發表宣言 - 表單"),d.parent.toggleClass("success-mode",!1),d.parent.toggleClass("coupon-mode",!1),$("#scene-container").toggleClass("height-1150",!0),a(),TweenMax.set(d.container,{autoAlpha:0,marginLeft:-50}),TweenMax.to(d.container,.4,{autoAlpha:1,marginLeft:0,onComplete:b}))},hide:function(a){e||(e=!0,d.container.css({opacity:"","margin-left":"",visibility:"hidden"}),$("#scene-container").toggleClass("height-1150",!1),a&&a.call())}}}(),function(){var a,b,c={},d=!0,e=window.Publish.Success={init:function(d,f){return c.container=d,c.parent=f,c.contentText=c.container.find(".text"),c.btnSkip=c.container.find(".btn-skip").on(_CLICK_,function(){ga("send","event",b,"按鈕點擊","跳過"),e.toNextStep()}),c.btnShare=c.container.find(".btn-share").on(_CLICK_,function(){ga("send","event",b,"按鈕點擊","分享 Facebook"),FB.ui({method:"feed",display:"iframe",link:Utility.getPath(),picture:a,title:"bossini［ 不停止，就是最好的超越。］",description:"不要停止，勇於向前，平凡中就能激起不平凡，今天的你 比昨天多了一點，現在比上一秒你多超越了一些， 不停止， 就是 最好的超越……寫下你的不停止宣言，就有機會獲得bossini好禮。"},function(a){a&&a.error_message?console.log(a.error_message):a&&a.post_id&&e.toNextStep()})}),e},toNextStep:function(){Publish.Coupon.getCouponUrl()?Publish.toStep("coupon"):SceneHandler.toHash("/Entries")},setShareImageUrl:function(b){a=b},show:function(a){d&&(d=!1,TweenMax.to(c.container,.4,{autoAlpha:1,delay:.9,onComplete:a}),0==Publish.Coupon.getCouponUrl()?(c.contentText.toggleClass("no-coupon-mode",!0),b="發表宣言 - 表單送交成功 - 折價券 - 無"):(c.contentText.toggleClass("no-coupon-mode",!1),b="發表宣言 - 表單送交成功 - 折價券 - 有"),ga("send","pageview",b),c.parent.toggleClass("coupon-mode",!1),c.parent.toggleClass("success-mode",!0))},hide:function(a){d||(d=!0,TweenMax.to(c.container,.4,{autoAlpha:0,onComplete:a}))}}}(),function(){var a,b={},c=!0,d=window.Publish.Coupon={init:function(c,e){return b.container=c,b.parent=e,b.couponImage=b.container.find(".coupon-image"),b.btnDownload=b.container.find(".btn-download").on(_CLICK_,function(){ga("send","event","發表宣言 - 折價券","點擊下載",a),a&&window.open(a+"?download=1","_blank")}),d},setCouponUrl:function(c){a=c,a?b.couponImage.css("background-image","url("+a+")").css("background-size","cover"):b.couponImage.css("background-image","none")},getCouponUrl:function(){return a||!1},show:function(a){c&&(c=!1,ga("send","pageview","發表宣言 - 折價券"),TweenMax.to(b.container,.4,{autoAlpha:1,delay:.9,onComplete:a}),b.parent.toggleClass("success-mode",!1),b.parent.toggleClass("coupon-mode",!0))},hide:function(a){c||(c=!0,TweenMax.to(b.container,.4,{autoAlpha:0,onComplete:a}))}}}(),function(){function a(a){$("#invisible-container").append(a[0].dom),s.container=$("#entries"),s.btnToPublish=s.container.find(".btn-to-publish").on(_CLICK_,function(){ga("send","event","宣言牆","按鈕點擊","我也要超越"),Main.loginFB("/Publish")}),s.arrowLeft=s.container.find(".arrow-left").on(_CLICK_,function(){x||u>0&&c(u-1)}),s.arrowRight=s.container.find(".arrow-right").on(_CLICK_,function(){x||v&&u<v-1&&c(u+1)}),s.thumbContainer=s.container.find(".thumb-container"),s.thumbs=s.thumbContainer.find(".thumb"),s.text1=s.container.find(".text-1"),s.text1.letters=s.text1.find("div"),y.ShowEntry.init(),s.container.detach()}function b(a){q=[];var b=t[a];n=b.pageSize;var d,e;for(d=1;d<=s.thumbs.length;d++)e=$(s.thumbs[d-1]),b.ignoreBlockDic[d]?e.toggleClass("ignore-mode",!0):(q.push(e),e.toggleClass("ignore-mode",!1));h(null,0,0),c(0)}function c(a){u=a,d(u,n)}function d(a,b){Loading.progress("empty").show(),x=!0,e();var c={page_index:a,page_size:b};ApiProxy.callApi("get_entries",c,!0,function(a){a.error?alert(a.error):(v=a.num_pages,p=a.data,h(function(){f(function(){x=!1,e()})})),Loading.hide()})}function e(){x?(s.arrowLeft.toggleClass("hide-mode",!0),s.arrowRight.toggleClass("hide-mode",!0)):(s.arrowLeft.toggleClass("hide-mode",0==u||0==v),s.arrowRight.toggleClass("hide-mode",!v||u==v-1))}function f(a){var b,c,d,e=0;c=new TimelineMax;var f=[];for(b=0;b<q.length;b++)(d=g(b))&&f.push(d);for(f=Utility.shuffleArray(f),b=0;b<f.length;b++)d=f[b],c.to(d,.6,{alpha:1,ease:Power1.easeIn},e),e+=.1;a&&c.add(a)}function g(a){var b=q[a],c=p[a];return b.unbind(_CLICK_),c?(b.toggleClass("ignore-mode",!1).css("background-image","url("+c.thumb_url+")").on(_CLICK_,function(){y.ShowEntry.show(c.url)}),b):(b.toggleClass("ignore-mode",!0),null)}function h(a,b,c){var d,e,f;for(void 0===b&&(b=.4),void 0===c&&(c=.05),f=new TimelineMax,d=0;d<q.length;d++)e=q[d],f.to(e,b,{alpha:0},d*c);a&&f.add(a)}function i(a){$("#scene-container").append(s.container),ga("send","pageview","宣言牆"),y.resize(!0),$("#background").find(".cover").toggleClass("entries-mode",!0),a.apply()}function j(){0===Main.viewport.index?l():k()}function k(){r&&r.kill();var a=r=new TimelineMax;a.set(s.container,{autoAlpha:0}),a.to(s.container,.3,{autoAlpha:1,ease:Power1.easeIn});var b=Utility.shuffleArray(s.text1.letters);a.set(b,{autoAlpha:0,z:100},0),a.staggerTo(b,1,{autoAlpha:1,z:0},.02,.3),a.set(s.btnToPublish,{autoAlpha:0},0),a.to(s.btnToPublish,.5,{autoAlpha:1,ease:Power1.easeIn},"-=.5")}function l(){r&&r.kill();var a=r=new TimelineMax;a.set(s.container,{autoAlpha:0}),a.to(s.container,.5,{autoAlpha:1})}function m(a){y.ShowEntry.hide();var b=new TimelineMax;b.to(s.container,.4,{autoAlpha:0}),b.add(function(){$("#background").find(".cover").toggleClass("entries-mode",!1),s.container.detach(),a.apply()})}var n,o,p,q,r,s={},t={0:{pageSize:9,ignoreBlockDic:{5:!0,10:!0,12:!0,13:!0,14:!0,15:!0}},1:{pageSize:14,ignoreBlockDic:{8:!0}}},u=0,v=null,w=!1,x=!0,y=window.Entries={stageIn:function(b,c){function d(a){a&&b.cbContentLoaded&&b.cbContentLoaded.call(),i(c)}function e(b){var c=[{url:"_entries.html",startWeight:0,weight:100,dom:null}];SceneHandler.loadTemplate(null,c,function(){a(c),w=!0,b.apply(null)},0)}w?d():e(d)},stageOut:function(a,b){m(b)},resize:function(a){if(w){var c=o,d=Main.viewport;o=d.index;(c!=o||a)&&b(d.index),BGManager.resize(j)?TweenMax.set(s.container,{autoAlpha:0}):a&&j()}}}}(),function(){var a={},b=!0,c=window.Entries.ShowEntry={init:function(){a.container=$("#entries-show-entry"),a.content=a.container.find(".content"),a.imageContainer=a.container.find(".image-container"),a.btnClose=a.container.find(".btn-close").on(_CLICK_,function(){c.hide()}),a.container.detach()},show:function(c){if(b){b=!1;var d=document.createElement("img");Loading.progress("empty").show(),d.onload=function(){Loading.hide(),a.imageContainer.css("background-image","url("+c+")").css("background-size","cover"),$("body").append(a.container);var b=new TimelineMax;b.set(a.container,{autoAlpha:1}),b.set(a.content,{autoAlpha:0},0),b.to(a.content,.4,{autoAlpha:1,ease:Power1.easeOut},0),b.set(a.imageContainer,{autoAlpha:0},0),b.to(a.imageContainer,.5,{autoAlpha:1,ease:Power1.easeIn},"+=.5"),b.set(a.btnClose,{autoAlpha:0},0),b.to(a.btnClose,.5,{autoAlpha:1},"-=.0")},d.src=c}},hide:function(){if(!b){b=!0;var c=new TimelineMax;c.to(a.container,.4,{autoAlpha:0}),c.add(function(){a.container.detach()})}}}}(),function(){function a(a){$("#invisible-container").append(a[0].dom),f.container=$("#rule"),f.contentContainer=f.container.find(".content-container"),f.scrollbase=f.container.find(".scroll-base");var b=Modernizr.touchevents;navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(b=!1),e=new SimpleScroller(f.contentContainer[0],null,0,b).update(!0),f.container.detach()}function b(a){$("#scene-container").append(f.container),ga("send","pageview","活動辦法與獎項"),h.resize(!0),a.apply()}function c(){var a=new TimelineMax;a.set(f.container,{autoAlpha:0}),a.to(f.container,.3,{autoAlpha:1}),a.set(f.container,{transformPerspective:600,marginLeft:0,transformOrigin:"center center",rotationY:-70,scale:.2},0),a.to(f.container,1,{rotationY:0,scale:1,ease:Power1.easeInOut},0),a.add(function(){f.container.css("transform","none")})}function d(a){var b=new TimelineMax;b.set(f.container,{transformPerspective:900,transformOrigin:"center center"}),b.to(f.container,1,{rotationY:90,scale:.2,marginLeft:400,ease:Power1.easeIn}),b.to(f.container,.3,{autoAlpha:0},"-=.3"),b.add(function(){f.container.detach(),a.apply()})}var e,f={},g=!1,h=window.Rule={stageIn:function(c,d){function e(a){a&&c.cbContentLoaded&&c.cbContentLoaded.call(),b(d)}function f(b){var c=[{url:"_rule.html",startWeight:0,weight:100,dom:null}];SceneHandler.loadTemplate(null,c,function(){a(c),g=!0,b.apply(null)},0)}g?e():f(e)},stageOut:function(a,b){d(b)},resize:function(a){if(g){BGManager.resize(c)?TweenMax.set(f.container,{autoAlpha:0}):a&&c();var b=Main.viewport;if(a||b.changed){var d=0==b.index?720:400,h=parseInt(f.scrollbase.css("left"))-parseInt(f.contentContainer.css("left"));e.containerSize(null,d).scrollBound(h,0,0,d-126).update(!0)}}}}}(),function(){function a(a){$("#invisible-container").append(a[0].dom),e.container=$("#vip"),e.container.detach()}function b(a){$("#scene-container").append(e.container).toggleClass("height-1150",!0),ga("send","pageview","VIP 方案"),g.resize(!0),a.apply()}function c(){var a=new TimelineMax;a.set(e.container,{autoAlpha:0}),a.to(e.container,.2,{autoAlpha:1}),a.set(e.container,{transformPerspective:600,marginLeft:0,transformOrigin:"center center",rotationY:-70,scale:.2},0),a.to(e.container,1,{rotationY:0,scale:1,ease:Power1.easeInOut},0),a.add(function(){e.container.css("transform","none")})}function d(a){var b=new TimelineMax;b.set(e.container,{transformPerspective:900,transformOrigin:"center center"}),b.to(e.container,1,{rotationY:90,scale:.2,marginLeft:400,ease:Power1.easeIn}),b.to(e.container,.3,{autoAlpha:0},"-=.3"),b.add(function(){e.container.detach(),$("#scene-container").toggleClass("height-1150",!1),a.apply()})}var e={},f=!1,g=window.Vip={stageIn:function(c,d){function e(a){a&&c.cbContentLoaded&&c.cbContentLoaded.call(),b(d)}function g(b){var c=[{url:"_vip.html",startWeight:0,weight:100,dom:null}];SceneHandler.loadTemplate(null,c,function(){a(c),f=!0,b.apply(null)},0)}f?e():g(e)},stageOut:function(a,b){d(b)},resize:function(a){f&&(BGManager.resize(c)?TweenMax.set(e.container,{autoAlpha:0}):a&&c())}}}(),function(){function a(a){$("#invisible-container").append(a[0].dom),j.container=$("#videos"),j.videoContainer=j.container.find(".video-container"),j.thumbContainer=j.container.find(".thumb-container"),e(),b(),d(),j.container.detach()}function b(){var a=document.createElement("script");a.src="https://www.youtube.com/player_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b),window.onYouTubePlayerAPIReady=function(){m=!0,c(n)}}function c(a){if(m){if(""==k[a].id)return void alert("影片尚未開放，敬請期待");n=a,d(),i&&i.destroy(),i=new YT.Player("ytplayer",{videoId:k[n].id,playerVars:{autoplay:1,controls:0}})}}function d(){j.thumbs.toggleClass("focus-mode",!1),j.thumbDic[n].toggleClass("focus-mode",!0)}function e(){function a(a){var b=j.thumbDic[a]=j.thumbContainer.find(".thumb:nth-child("+a+")"),d=b.find(".desc"),e=k[a];d.text(e.title),b.on(_CLICK_,function(){ga("send","event","影片","影片選擇",e.title),e.link?window.open(e.link,"_blank"):c(a)})}j.thumbs=j.container.find(".thumb"),j.thumbDic={};for(var b=1;b<=6;b++)a(b)}function f(a){$("#scene-container").append(j.container),ga("send","pageview","影片"),o.resize(!0),a.apply()}function g(){var a=new TimelineMax;a.set(j.container,{autoAlpha:0}),a.to(j.container,.4,{autoAlpha:1}),m&&c(n)}function h(a){var b=new TimelineMax;b.to(j.container,.4,{autoAlpha:0}),b.add(function(){i&&(i.destroy(),i=null),j.container.detach(),a.apply()})}var i,j={},k={1:{id:"PWRj1ub6AnI",title:"bossini形象影片"},2:{id:"9kiXn5SBDoI",title:"陳庭妮 篇"},3:{id:"",title:"HH 先生 篇"},4:{id:"",title:"Peter Su 篇"},5:{id:"",title:"為你的衣櫃添新衣",link:"https://www.bossini.com.tw/"},6:{id:"",title:"加入VIP 回饋不停止",link:"http://www.bossini.com.tw/zh_TW/VIP.html"}},l=!1,m=!1,n=1,o=window.Videos={getVideoDic:function(){return k},setPlayingIndex:function(a){n=a},stageIn:function(b,c){function d(a){a&&b.cbContentLoaded&&b.cbContentLoaded.call(),f(c)}function e(b){var c=[{url:"_videos.html",startWeight:0,weight:100,dom:null}];SceneHandler.loadTemplate(null,c,function(){a(c),l=!0,b.apply(null)},0)}l?d():e(d)},stageOut:function(a,b){h(b)},resize:function(a){l&&(BGManager.resize(g)?TweenMax.set(j.container,{autoAlpha:0}):a&&g())}}}();